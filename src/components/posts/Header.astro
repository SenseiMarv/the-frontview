---
// eslint-disable-next-line import/no-unresolved
import { Image } from "@astrojs/image/components";

import ExternalLink from "../utils/ExternalLink.astro";
import { formatDateToLocaleDate } from "../utils/formatDates.js";
import Icon from "../utils/Icon.astro";
import Share from "./Share.astro";
import TagList from "./TagList.astro";

export interface Props {
  title: string;
  imgUrl: string;
  imgAuthor: string;
  imgAuthorUrl: string;
  pubDate: string;
  tags: string;
  readingTime: number;
}

const { title, imgUrl, imgAuthor, imgAuthorUrl, pubDate, tags, readingTime } =
  Astro.props;

const formattedDate = formatDateToLocaleDate(new Date(pubDate));
const formattedReadingTime = `${readingTime} min read`;
---

<div class="flex flex-col items-center">
  <h1 class="text-5xl leading-snug md:text-6xl">
    {title}
  </h1>
  <div
    class="mt-4 flex gap-1 whitespace-nowrap text-lg leading-snug text-gray-500 dark:text-gray-400 md:mt-6 md:text-xl"
  >
    <Icon
      iconSet="fluent-emoji-high-contrast"
      name="tear-off-calendar"
      classString="mt-[0.05rem] w-5 h-5"
    />
    {formattedDate} |<Icon
      iconSet="fluent-emoji-high-contrast"
      name="eight-oclock"
      classString="mt-[0.125rem] w-5 h-5"
    />
    {formattedReadingTime} |<Icon
      iconSet="fluent-emoji-high-contrast"
      name="keycap-hashtag"
      classString="mt-[0.2rem] w-5 h-5"
    />
    <div class="gap-0">
      <TagList tags={tags} />
    </div>
  </div>
  <div class="mt-8 grid grid-cols-1 shadow-xl md:mt-10">
    <div class="z-10 col-start-1 row-start-1">
      <Image src={imgUrl} width={600} height={337.5} alt="Blogpost cover" />
    </div>
    <div
      class="z-0 col-start-1 row-start-1 animate-pulse bg-gray-300 dark:bg-gray-600"
    >
    </div>
  </div>
  <div class="mt-4 text-sm">
    Photo by <ExternalLink href={imgAuthorUrl}>{imgAuthor}</ExternalLink>
  </div>
  <div class="mt-3">
    <Share />
  </div>
</div>
